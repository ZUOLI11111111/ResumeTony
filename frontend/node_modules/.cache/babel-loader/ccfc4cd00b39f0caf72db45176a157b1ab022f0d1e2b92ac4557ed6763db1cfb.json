{"ast":null,"code":"var _jsxFileName = \"/home/m/resume_revision/frontend/src/components/ResumeUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './ResumeUpload.css';\n\n// 创建支持大数据的axios实例\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = axios.create({\n  baseURL: 'http://localhost:8080/api',\n  timeout: 30000,\n  // 增加超时时间到30秒\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json'\n  },\n  maxContentLength: Infinity,\n  // 允许无限大小的内容\n  maxBodyLength: Infinity // 允许无限大小的请求体\n});\nfunction ResumeUpload({\n  languages,\n  apiUrl,\n  onViewHistory\n}) {\n  _s();\n  const [resumeText, setResumeText] = useState('');\n  const [modificationRequirements, setModificationRequirements] = useState('');\n  const [modifiedResume, setModifiedResume] = useState('');\n  const [isModifying, setIsModifying] = useState(false);\n  const [sourceLanguage, setSourceLanguage] = useState('中文');\n  const [targetLanguage, setTargetLanguage] = useState('中文');\n  const [success, setSuccess] = useState('');\n  const [isSaving, setIsSaving] = useState(false);\n  const [useFormatted, setUseFormatted] = useState(false); // 是否使用格式化显示\n\n  const handleTextChange = e => {\n    setResumeText(e.target.value);\n  };\n  const handleRequirementsChange = e => {\n    setModificationRequirements(e.target.value);\n  };\n\n  // 切换显示模式\n  const toggleDisplayMode = () => {\n    setUseFormatted(!useFormatted);\n  };\n\n  // 格式化简历内容，使其更美观\n  const formatResumeContent = content => {\n    if (!content) return null;\n\n    // 检查内容是否已经包含HTML标签\n    if (content.includes('<') && content.includes('>')) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: content\n        },\n        style: {\n          textAlign: 'left'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 20\n      }, this);\n    }\n    const lines = content.split('\\n');\n    const formattedLines = [];\n    let currentSectionTitle = '';\n    let inProjectSection = false;\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      const trimmedLine = line.trim();\n\n      // 检查是否为空行\n      if (trimmedLine === '') {\n        formattedLines.push(/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"section-divider\"\n        }, `empty-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 37\n        }, this));\n        continue;\n      }\n\n      // 检查是否是章节标题\n      const isSectionTitle = /^(基本信息|教育背景|工作经验|项目经验|技能|主修课程)/.test(trimmedLine) || /^(Personal Information|Education|Work Experience|Project Experience|Skills|Courses)/.test(trimmedLine);\n      if (isSectionTitle) {\n        currentSectionTitle = trimmedLine;\n        inProjectSection = currentSectionTitle.includes('项目经验') || currentSectionTitle.includes('Project Experience');\n        formattedLines.push(/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"resume-section-title\",\n          children: trimmedLine\n        }, `section-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this));\n        continue;\n      }\n\n      // 项目标题处理\n      if (inProjectSection && trimmedLine && !trimmedLine.startsWith('•') && !trimmedLine.startsWith('-') && !trimmedLine.includes(':') && !trimmedLine.includes('：')) {\n        formattedLines.push(/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"resume-project-title\",\n          children: trimmedLine\n        }, `project-${i}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this));\n        continue;\n      }\n\n      // 处理列表项 (bullets)\n      if (trimmedLine.startsWith('•') || trimmedLine.startsWith('-') || trimmedLine.startsWith('*')) {\n        const bulletContent = trimmedLine.substring(1).trim();\n        formattedLines.push(/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resume-bullet-point\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"bullet-symbol\",\n            children: \"\\u2022\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"bullet-content\",\n            children: bulletContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, `bullet-${i}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this));\n        continue;\n      }\n\n      // 处理键值对 (如 \"姓名: xxx\")\n      const keyValueMatch = trimmedLine.match(/^(.+?)[:：]\\s*(.+)$/);\n      if (keyValueMatch) {\n        formattedLines.push(/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resume-key-value\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"resume-key\",\n            children: [keyValueMatch[1], \"\\uFF1A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"resume-value\",\n            children: keyValueMatch[2]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this)]\n        }, `kv-${i}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this));\n        continue;\n      }\n\n      // 处理普通段落\n      formattedLines.push(/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"resume-paragraph\",\n        children: trimmedLine\n      }, `p-${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this));\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'left'\n      },\n      children: formattedLines\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 16\n    }, this);\n  };\n  async function handleTextOutput() {\n    setIsModifying(true);\n    setModifiedResume(\"\"); // 清空之前的结果\n    setSuccess(\"\"); // 清空成功消息\n\n    try {\n      const response = await fetch(`${apiUrl}/api/modify_resume`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          resume_text: resumeText,\n          requirements: modificationRequirements,\n          source_language: sourceLanguage,\n          target_language: targetLanguage\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"服务器响应错误\");\n      }\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      while (true) {\n        const {\n          done,\n          value\n        } = await reader.read();\n        if (done) break;\n        const text = decoder.decode(value);\n        const events = text.split('\\n\\n');\n        for (const event of events) {\n          if (!event.trim()) continue;\n\n          // 提取\"data:\"后面的JSON\n          const match = event.match(/^data:\\s*(.+)$/m);\n          if (!match) continue;\n          try {\n            const data = JSON.parse(match[1]);\n            if (data.type === 'update') {\n              setModifiedResume(data.text);\n            } else if (data.type === 'error') {\n              setModifiedResume(\"抱歉，修改过程中出现错误，请稍后再试。\");\n            } else if (data.type === 'end') {\n              setSuccess(\"修改成功！\");\n              // 修改成功后自动保存到数据库\n              saveResultToDatabase(resumeText, data.text, modificationRequirements);\n            }\n          } catch (parseError) {\n            console.error(\"解析JSON失败:\", parseError, match[1]);\n          }\n        }\n      }\n    } catch (error) {\n      console.error(\"请求失败:\", error);\n      setModifiedResume(\"抱歉，修改过程中出现错误，请稍后再试。\");\n    } finally {\n      setIsModifying(false);\n    }\n  }\n\n  // 保存结果到数据库\n  const saveResultToDatabase = async (originalContent, modifiedContent, description) => {\n    try {\n      setIsSaving(true);\n      console.log('开始保存简历修改结果到数据库...');\n      console.log('原始内容长度:', originalContent.length);\n      console.log('修改后内容长度:', modifiedContent.length);\n      const response = await api.post('/resume', {\n        originalContent: originalContent,\n        modifiedContent: modifiedContent,\n        modificationDescription: description || '',\n        userId: 'user123',\n        // 可以从用户登录信息中获取\n        status: 1 // 1表示已完成\n      });\n      console.log('保存响应:', response);\n      if (response.data && response.data.success) {\n        setSuccess(prev => prev + \" 已保存到历史记录！\");\n        console.log('保存成功，ID:', response.data.data.id);\n      } else {\n        console.error('保存失败:', response.data);\n      }\n    } catch (error) {\n      console.error('保存到数据库出错:', error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"resume-modification-tool\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modification-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modification-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u7B80\\u5386\\u4FEE\\u6539\\u5DE5\\u5177\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"history-button\",\n          onClick: onViewHistory,\n          children: \"\\u67E5\\u770B\\u5386\\u53F2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"requirements-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"card-title\",\n          children: \"\\u4FEE\\u6539\\u8981\\u6C42\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"modification-requirements\",\n          className: \"requirements-input\",\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u5BF9\\u7B80\\u5386\\u4FEE\\u6539\\u7684\\u5177\\u4F53\\u8981\\u6C42...\",\n          value: modificationRequirements,\n          onChange: handleRequirementsChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resume-comparison-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resume-column\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resume-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\u539F\\u59CB\\u7B80\\u5386\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"language-selector\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: sourceLanguage,\n                onChange: e => setSourceLanguage(e.target.value),\n                className: \"language-select\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\\u4E2D\\u6587\",\n                  children: \"\\u4E2D\\u6587\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 37\n                }, this), Object.entries(languages).filter(([k]) => k !== '中文').map(([k, v]) => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: k,\n                  children: v\n                }, `source-${k}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 45\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resume-content-card original-resume\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"resume-text-input\",\n              placeholder: \"\\u8BF7\\u5728\\u6B64\\u7C98\\u8D34\\u60A8\\u7684\\u7B80\\u5386\\u6587\\u672C...\",\n              value: resumeText,\n              onChange: handleTextChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"conversion-column\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"conversion-arrow\",\n            children: \"\\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modify-button\",\n            onClick: handleTextOutput,\n            disabled: isModifying || !resumeText.trim(),\n            children: isModifying ? '修改中...' : '开始修改'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"target-language\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: targetLanguage,\n              onChange: e => setTargetLanguage(e.target.value),\n              className: \"language-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\\u4E2D\\u6587\",\n                children: \"\\u4E2D\\u6587\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 33\n              }, this), Object.entries(languages).filter(([k]) => k !== '中文').map(([k, v]) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: k,\n                children: v\n              }, `target-${k}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 41\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"resume-column\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resume-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\u4FEE\\u6539\\u540E\\u7684\\u7B80\\u5386\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"display-controls\",\n              children: [success && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"success-message\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"success-icon\",\n                  children: \"\\u2713\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 41\n                }, this), \" \", success, isSaving && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"saving-indicator\",\n                  children: \" (\\u4FDD\\u5B58\\u4E2D...)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 54\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 37\n              }, this), modifiedResume && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"display-mode-toggle\",\n                onClick: toggleDisplayMode,\n                children: useFormatted ? '查看原始文本' : '查看格式化内容'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"resume-content-card modified-resume\",\n            children: !modifiedResume ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-content\",\n              children: \"\\u4FEE\\u6539\\u540E\\u7684\\u7B80\\u5386\\u5C06\\u663E\\u793A\\u5728\\u8FD9\\u91CC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 33\n            }, this) : useFormatted ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"formatted-resume\",\n              children: formatResumeContent(modifiedResume)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"resume-text-output\",\n              placeholder: \"\\u4FEE\\u6539\\u540E\\u7684\\u7B80\\u5386\\u5C06\\u663E\\u793A\\u5728\\u8FD9\\u91CC\",\n              value: modifiedResume,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 9\n  }, this);\n}\n_s(ResumeUpload, \"r0JLf4QGfNjJcJCp/aLm/o+5WxE=\");\n_c = ResumeUpload;\nexport default ResumeUpload;\nvar _c;\n$RefreshReg$(_c, \"ResumeUpload\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","api","create","baseURL","timeout","headers","maxContentLength","Infinity","maxBodyLength","ResumeUpload","languages","apiUrl","onViewHistory","_s","resumeText","setResumeText","modificationRequirements","setModificationRequirements","modifiedResume","setModifiedResume","isModifying","setIsModifying","sourceLanguage","setSourceLanguage","targetLanguage","setTargetLanguage","success","setSuccess","isSaving","setIsSaving","useFormatted","setUseFormatted","handleTextChange","e","target","value","handleRequirementsChange","toggleDisplayMode","formatResumeContent","content","includes","dangerouslySetInnerHTML","__html","style","textAlign","fileName","_jsxFileName","lineNumber","columnNumber","lines","split","formattedLines","currentSectionTitle","inProjectSection","i","length","line","trimmedLine","trim","push","className","isSectionTitle","test","children","startsWith","bulletContent","substring","keyValueMatch","match","handleTextOutput","response","fetch","method","body","JSON","stringify","resume_text","requirements","source_language","target_language","ok","Error","reader","getReader","decoder","TextDecoder","done","read","text","decode","events","event","data","parse","type","saveResultToDatabase","parseError","console","error","originalContent","modifiedContent","description","log","post","modificationDescription","userId","status","prev","id","onClick","placeholder","onChange","Object","entries","filter","k","map","v","disabled","readOnly","_c","$RefreshReg$"],"sources":["/home/m/resume_revision/frontend/src/components/ResumeUpload.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './ResumeUpload.css';\n\n// 创建支持大数据的axios实例\nconst api = axios.create({\n    baseURL: 'http://localhost:8080/api',\n    timeout: 30000, // 增加超时时间到30秒\n    headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n    },\n    maxContentLength: Infinity, // 允许无限大小的内容\n    maxBodyLength: Infinity // 允许无限大小的请求体\n});\n\nfunction ResumeUpload({ languages, apiUrl, onViewHistory }) {\n    const [resumeText, setResumeText] = useState('');\n    const [modificationRequirements, setModificationRequirements] = useState('');\n    const [modifiedResume, setModifiedResume] = useState('');\n    const [isModifying, setIsModifying] = useState(false);\n    const [sourceLanguage, setSourceLanguage] = useState('中文');\n    const [targetLanguage, setTargetLanguage] = useState('中文');\n    const [success, setSuccess] = useState('');\n    const [isSaving, setIsSaving] = useState(false);\n    const [useFormatted, setUseFormatted] = useState(false); // 是否使用格式化显示\n    \n    const handleTextChange = (e) => {\n        setResumeText(e.target.value);\n    };\n    \n    const handleRequirementsChange = (e) => {\n        setModificationRequirements(e.target.value);\n    };\n    \n    // 切换显示模式\n    const toggleDisplayMode = () => {\n        setUseFormatted(!useFormatted);\n    };\n    \n    // 格式化简历内容，使其更美观\n    const formatResumeContent = (content) => {\n        if (!content) return null;\n        \n        // 检查内容是否已经包含HTML标签\n        if (content.includes('<') && content.includes('>')) {\n            return <div dangerouslySetInnerHTML={{ __html: content }} style={{ textAlign: 'left' }} />;\n        }\n        \n        const lines = content.split('\\n');\n        const formattedLines = [];\n        let currentSectionTitle = '';\n        let inProjectSection = false;\n        \n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i];\n            const trimmedLine = line.trim();\n            \n            // 检查是否为空行\n            if (trimmedLine === '') {\n                formattedLines.push(<div key={`empty-${i}`} className=\"section-divider\"></div>);\n                continue;\n            }\n            \n            // 检查是否是章节标题\n            const isSectionTitle = \n                /^(基本信息|教育背景|工作经验|项目经验|技能|主修课程)/.test(trimmedLine) ||\n                /^(Personal Information|Education|Work Experience|Project Experience|Skills|Courses)/.test(trimmedLine);\n            \n            if (isSectionTitle) {\n                currentSectionTitle = trimmedLine;\n                inProjectSection = currentSectionTitle.includes('项目经验') || currentSectionTitle.includes('Project Experience');\n                formattedLines.push(\n                    <h3 key={`section-${i}`} className=\"resume-section-title\">\n                        {trimmedLine}\n                    </h3>\n                );\n                continue;\n            }\n            \n            // 项目标题处理\n            if (inProjectSection && trimmedLine && !trimmedLine.startsWith('•') && !trimmedLine.startsWith('-') &&\n                !trimmedLine.includes(':') && !trimmedLine.includes('：')) {\n                formattedLines.push(\n                    <h4 key={`project-${i}`} className=\"resume-project-title\">\n                        {trimmedLine}\n                    </h4>\n                );\n                continue;\n            }\n            \n            // 处理列表项 (bullets)\n            if (trimmedLine.startsWith('•') || trimmedLine.startsWith('-') || trimmedLine.startsWith('*')) {\n                const bulletContent = trimmedLine.substring(1).trim();\n                formattedLines.push(\n                    <div key={`bullet-${i}`} className=\"resume-bullet-point\">\n                        <span className=\"bullet-symbol\">•</span>\n                        <span className=\"bullet-content\">{bulletContent}</span>\n                    </div>\n                );\n                continue;\n            }\n            \n            // 处理键值对 (如 \"姓名: xxx\")\n            const keyValueMatch = trimmedLine.match(/^(.+?)[:：]\\s*(.+)$/);\n            if (keyValueMatch) {\n                formattedLines.push(\n                    <div key={`kv-${i}`} className=\"resume-key-value\">\n                        <span className=\"resume-key\">{keyValueMatch[1]}：</span>\n                        <span className=\"resume-value\">{keyValueMatch[2]}</span>\n                    </div>\n                );\n                continue;\n            }\n            \n            // 处理普通段落\n            formattedLines.push(\n                <p key={`p-${i}`} className=\"resume-paragraph\">\n                    {trimmedLine}\n                </p>\n            );\n        }\n        \n        return <div style={{ textAlign: 'left' }}>{formattedLines}</div>;\n    };\n    \n    async function handleTextOutput() {\n        setIsModifying(true);\n        setModifiedResume(\"\"); // 清空之前的结果\n        setSuccess(\"\"); // 清空成功消息\n        \n        try {\n            const response = await fetch(`${apiUrl}/api/modify_resume`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    resume_text: resumeText,\n                    requirements: modificationRequirements,\n                    source_language: sourceLanguage,\n                    target_language: targetLanguage\n                })\n            });\n            \n            if (!response.ok) {\n                throw new Error(\"服务器响应错误\");\n            }\n            \n            const reader = response.body.getReader();\n            const decoder = new TextDecoder();\n            \n            while (true) {\n                const { done, value } = await reader.read();\n                if (done) break;\n                \n                const text = decoder.decode(value);\n                const events = text.split('\\n\\n');\n                \n                for (const event of events) {\n                    if (!event.trim()) continue;\n                    \n                    // 提取\"data:\"后面的JSON\n                    const match = event.match(/^data:\\s*(.+)$/m);\n                    if (!match) continue;\n                    \n                    try {\n                        const data = JSON.parse(match[1]);\n                        \n                        if (data.type === 'update') {\n                            setModifiedResume(data.text);\n                        } else if (data.type === 'error') {\n                            setModifiedResume(\"抱歉，修改过程中出现错误，请稍后再试。\");\n                        } else if (data.type === 'end') {\n                            setSuccess(\"修改成功！\");\n                            // 修改成功后自动保存到数据库\n                            saveResultToDatabase(resumeText, data.text, modificationRequirements);\n                        }\n                    } catch (parseError) {\n                        console.error(\"解析JSON失败:\", parseError, match[1]);\n                    }\n                }\n            }\n        } catch (error) {\n            console.error(\"请求失败:\", error);\n            setModifiedResume(\"抱歉，修改过程中出现错误，请稍后再试。\");\n        } finally {\n            setIsModifying(false);\n        }\n    }\n\n    // 保存结果到数据库\n    const saveResultToDatabase = async (originalContent, modifiedContent, description) => {\n        try {\n            setIsSaving(true);\n            console.log('开始保存简历修改结果到数据库...');\n            console.log('原始内容长度:', originalContent.length);\n            console.log('修改后内容长度:', modifiedContent.length);\n            \n            const response = await api.post('/resume', {\n                originalContent: originalContent,\n                modifiedContent: modifiedContent,\n                modificationDescription: description || '',\n                userId: 'user123', // 可以从用户登录信息中获取\n                status: 1 // 1表示已完成\n            });\n            \n            console.log('保存响应:', response);\n            \n            if (response.data && response.data.success) {\n                setSuccess(prev => prev + \" 已保存到历史记录！\");\n                console.log('保存成功，ID:', response.data.data.id);\n            } else {\n                console.error('保存失败:', response.data);\n            }\n        } catch (error) {\n            console.error('保存到数据库出错:', error);\n        } finally {\n            setIsSaving(false);\n        }\n    };\n    \n    return (\n        <div className=\"resume-modification-tool\">\n            <div className=\"modification-container\">\n                {/* 头部区域 */}\n                <div className=\"modification-header\">\n                    <h2>简历修改工具</h2>\n                    <button \n                        className=\"history-button\" \n                        onClick={onViewHistory}\n                    >\n                        查看历史\n                    </button>\n                </div>\n\n                {/* 修改要求输入框 */}\n                <div className=\"requirements-card\">\n                    <h3 className=\"card-title\">修改要求</h3>\n                    <textarea \n                        id=\"modification-requirements\"\n                        className=\"requirements-input\"\n                        placeholder=\"请输入您对简历修改的具体要求...\"\n                        value={modificationRequirements}\n                        onChange={handleRequirementsChange}\n                    ></textarea>\n                </div>\n                \n                {/* 主体内容区域 */}\n                <div className=\"resume-comparison-container\">\n                    {/* 左侧原始简历 */}\n                    <div className=\"resume-column\">\n                        <div className=\"resume-header\">\n                            <h3>原始简历</h3>\n                            <div className=\"language-selector\">\n                                <select \n                                    value={sourceLanguage} \n                                    onChange={(e) => setSourceLanguage(e.target.value)}\n                                    className=\"language-select\"\n                                >\n                                    <option value=\"中文\">中文</option>\n                                    {Object.entries(languages)\n                                        .filter(([k]) => k !== '中文')\n                                        .map(([k, v]) => (\n                                            <option key={`source-${k}`} value={k}>{v}</option>\n                                        ))\n                                    }\n                                </select>\n                            </div>\n                        </div>\n                        <div className=\"resume-content-card original-resume\">\n                            <textarea \n                                className=\"resume-text-input\"\n                                placeholder=\"请在此粘贴您的简历文本...\"\n                                value={resumeText}\n                                onChange={handleTextChange}\n                            ></textarea>\n                        </div>\n                    </div>\n                    \n                    {/* 中间转换区域 */}\n                    <div className=\"conversion-column\">\n                        <div className=\"conversion-arrow\">→</div>\n                        <button \n                            className=\"modify-button\"\n                            onClick={handleTextOutput}\n                            disabled={isModifying || !resumeText.trim()}\n                        >\n                            {isModifying ? '修改中...' : '开始修改'}\n                        </button>\n                        <div className=\"target-language\">\n                            <select \n                                value={targetLanguage} \n                                onChange={(e) => setTargetLanguage(e.target.value)}\n                                className=\"language-select\"\n                            >\n                                <option value=\"中文\">中文</option>\n                                {Object.entries(languages)\n                                    .filter(([k]) => k !== '中文')\n                                    .map(([k, v]) => (\n                                        <option key={`target-${k}`} value={k}>{v}</option>\n                                    ))\n                                }\n                            </select>\n                        </div>\n                    </div>\n                    \n                    {/* 右侧修改后简历 */}\n                    <div className=\"resume-column\">\n                        <div className=\"resume-header\">\n                            <h3>修改后的简历</h3>\n                            <div className=\"display-controls\">\n                                {/* 成功提示消息 */}\n                                {success && (\n                                    <div className=\"success-message\">\n                                        <span className=\"success-icon\">✓</span> {success}\n                                        {isSaving && <span className=\"saving-indicator\"> (保存中...)</span>}\n                                    </div>\n                                )}\n                                {modifiedResume && (\n                                    <button \n                                        className=\"display-mode-toggle\" \n                                        onClick={toggleDisplayMode}\n                                    >\n                                        {useFormatted ? '查看原始文本' : '查看格式化内容'}\n                                    </button>\n                                )}\n                            </div>\n                        </div>\n                        <div className=\"resume-content-card modified-resume\">\n                            {!modifiedResume ? (\n                                <div className=\"empty-content\">\n                                    修改后的简历将显示在这里\n                                </div>\n                            ) : useFormatted ? (\n                                <div className=\"formatted-resume\">\n                                    {formatResumeContent(modifiedResume)}\n                                </div>\n                            ) : (\n                                <textarea \n                                    className=\"resume-text-output\"\n                                    placeholder=\"修改后的简历将显示在这里\"\n                                    value={modifiedResume}\n                                    readOnly\n                                ></textarea>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ResumeUpload;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,oBAAoB;;AAE3B;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,GAAG,GAAGH,KAAK,CAACI,MAAM,CAAC;EACrBC,OAAO,EAAE,2BAA2B;EACpCC,OAAO,EAAE,KAAK;EAAE;EAChBC,OAAO,EAAE;IACL,cAAc,EAAE,kBAAkB;IAClC,QAAQ,EAAE;EACd,CAAC;EACDC,gBAAgB,EAAEC,QAAQ;EAAE;EAC5BC,aAAa,EAAED,QAAQ,CAAC;AAC5B,CAAC,CAAC;AAEF,SAASE,YAAYA,CAAC;EAAEC,SAAS;EAAEC,MAAM;EAAEC;AAAc,CAAC,EAAE;EAAAC,EAAA;EACxD,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACoB,wBAAwB,EAAEC,2BAA2B,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5E,MAAM,CAACsB,cAAc,EAAEC,iBAAiB,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACwB,WAAW,EAAEC,cAAc,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC0B,cAAc,EAAEC,iBAAiB,CAAC,GAAG3B,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAAC4B,cAAc,EAAEC,iBAAiB,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAAC8B,OAAO,EAAEC,UAAU,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACgC,QAAQ,EAAEC,WAAW,CAAC,GAAGjC,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAACkC,YAAY,EAAEC,eAAe,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;;EAEzD,MAAMoC,gBAAgB,GAAIC,CAAC,IAAK;IAC5BlB,aAAa,CAACkB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EACjC,CAAC;EAED,MAAMC,wBAAwB,GAAIH,CAAC,IAAK;IACpChB,2BAA2B,CAACgB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC;EAC/C,CAAC;;EAED;EACA,MAAME,iBAAiB,GAAGA,CAAA,KAAM;IAC5BN,eAAe,CAAC,CAACD,YAAY,CAAC;EAClC,CAAC;;EAED;EACA,MAAMQ,mBAAmB,GAAIC,OAAO,IAAK;IACrC,IAAI,CAACA,OAAO,EAAE,OAAO,IAAI;;IAEzB;IACA,IAAIA,OAAO,CAACC,QAAQ,CAAC,GAAG,CAAC,IAAID,OAAO,CAACC,QAAQ,CAAC,GAAG,CAAC,EAAE;MAChD,oBAAOxC,OAAA;QAAKyC,uBAAuB,EAAE;UAAEC,MAAM,EAAEH;QAAQ,CAAE;QAACI,KAAK,EAAE;UAAEC,SAAS,EAAE;QAAO;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAC9F;IAEA,MAAMC,KAAK,GAAGV,OAAO,CAACW,KAAK,CAAC,IAAI,CAAC;IACjC,MAAMC,cAAc,GAAG,EAAE;IACzB,IAAIC,mBAAmB,GAAG,EAAE;IAC5B,IAAIC,gBAAgB,GAAG,KAAK;IAE5B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,KAAK,CAACM,MAAM,EAAED,CAAC,EAAE,EAAE;MACnC,MAAME,IAAI,GAAGP,KAAK,CAACK,CAAC,CAAC;MACrB,MAAMG,WAAW,GAAGD,IAAI,CAACE,IAAI,CAAC,CAAC;;MAE/B;MACA,IAAID,WAAW,KAAK,EAAE,EAAE;QACpBN,cAAc,CAACQ,IAAI,cAAC3D,OAAA;UAAwB4D,SAAS,EAAC;QAAiB,GAAzC,SAASN,CAAC,EAAE;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAmC,CAAC,CAAC;QAC/E;MACJ;;MAEA;MACA,MAAMa,cAAc,GAChB,gCAAgC,CAACC,IAAI,CAACL,WAAW,CAAC,IAClD,qFAAqF,CAACK,IAAI,CAACL,WAAW,CAAC;MAE3G,IAAII,cAAc,EAAE;QAChBT,mBAAmB,GAAGK,WAAW;QACjCJ,gBAAgB,GAAGD,mBAAmB,CAACZ,QAAQ,CAAC,MAAM,CAAC,IAAIY,mBAAmB,CAACZ,QAAQ,CAAC,oBAAoB,CAAC;QAC7GW,cAAc,CAACQ,IAAI,cACf3D,OAAA;UAAyB4D,SAAS,EAAC,sBAAsB;UAAAG,QAAA,EACpDN;QAAW,GADP,WAAWH,CAAC,EAAE;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEnB,CACR,CAAC;QACD;MACJ;;MAEA;MACA,IAAIK,gBAAgB,IAAII,WAAW,IAAI,CAACA,WAAW,CAACO,UAAU,CAAC,GAAG,CAAC,IAAI,CAACP,WAAW,CAACO,UAAU,CAAC,GAAG,CAAC,IAC/F,CAACP,WAAW,CAACjB,QAAQ,CAAC,GAAG,CAAC,IAAI,CAACiB,WAAW,CAACjB,QAAQ,CAAC,GAAG,CAAC,EAAE;QAC1DW,cAAc,CAACQ,IAAI,cACf3D,OAAA;UAAyB4D,SAAS,EAAC,sBAAsB;UAAAG,QAAA,EACpDN;QAAW,GADP,WAAWH,CAAC,EAAE;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAEnB,CACR,CAAC;QACD;MACJ;;MAEA;MACA,IAAIS,WAAW,CAACO,UAAU,CAAC,GAAG,CAAC,IAAIP,WAAW,CAACO,UAAU,CAAC,GAAG,CAAC,IAAIP,WAAW,CAACO,UAAU,CAAC,GAAG,CAAC,EAAE;QAC3F,MAAMC,aAAa,GAAGR,WAAW,CAACS,SAAS,CAAC,CAAC,CAAC,CAACR,IAAI,CAAC,CAAC;QACrDP,cAAc,CAACQ,IAAI,cACf3D,OAAA;UAAyB4D,SAAS,EAAC,qBAAqB;UAAAG,QAAA,gBACpD/D,OAAA;YAAM4D,SAAS,EAAC,eAAe;YAAAG,QAAA,EAAC;UAAC;YAAAlB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACxChD,OAAA;YAAM4D,SAAS,EAAC,gBAAgB;YAAAG,QAAA,EAAEE;UAAa;YAAApB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA,GAFjD,UAAUM,CAAC,EAAE;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAGlB,CACT,CAAC;QACD;MACJ;;MAEA;MACA,MAAMmB,aAAa,GAAGV,WAAW,CAACW,KAAK,CAAC,oBAAoB,CAAC;MAC7D,IAAID,aAAa,EAAE;QACfhB,cAAc,CAACQ,IAAI,cACf3D,OAAA;UAAqB4D,SAAS,EAAC,kBAAkB;UAAAG,QAAA,gBAC7C/D,OAAA;YAAM4D,SAAS,EAAC,YAAY;YAAAG,QAAA,GAAEI,aAAa,CAAC,CAAC,CAAC,EAAC,QAAC;UAAA;YAAAtB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACvDhD,OAAA;YAAM4D,SAAS,EAAC,cAAc;YAAAG,QAAA,EAAEI,aAAa,CAAC,CAAC;UAAC;YAAAtB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA,GAFlD,MAAMM,CAAC,EAAE;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAGd,CACT,CAAC;QACD;MACJ;;MAEA;MACAG,cAAc,CAACQ,IAAI,cACf3D,OAAA;QAAkB4D,SAAS,EAAC,kBAAkB;QAAAG,QAAA,EACzCN;MAAW,GADR,KAAKH,CAAC,EAAE;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAEb,CACP,CAAC;IACL;IAEA,oBAAOhD,OAAA;MAAK2C,KAAK,EAAE;QAAEC,SAAS,EAAE;MAAO,CAAE;MAAAmB,QAAA,EAAEZ;IAAc;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EACpE,CAAC;EAED,eAAeqB,gBAAgBA,CAAA,EAAG;IAC9BhD,cAAc,CAAC,IAAI,CAAC;IACpBF,iBAAiB,CAAC,EAAE,CAAC,CAAC,CAAC;IACvBQ,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;;IAEhB,IAAI;MACA,MAAM2C,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAG5D,MAAM,oBAAoB,EAAE;QACxD6D,MAAM,EAAE,MAAM;QACdnE,OAAO,EAAE;UACL,cAAc,EAAE;QACpB,CAAC;QACDoE,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACjBC,WAAW,EAAE9D,UAAU;UACvB+D,YAAY,EAAE7D,wBAAwB;UACtC8D,eAAe,EAAExD,cAAc;UAC/ByD,eAAe,EAAEvD;QACrB,CAAC;MACL,CAAC,CAAC;MAEF,IAAI,CAAC8C,QAAQ,CAACU,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,SAAS,CAAC;MAC9B;MAEA,MAAMC,MAAM,GAAGZ,QAAQ,CAACG,IAAI,CAACU,SAAS,CAAC,CAAC;MACxC,MAAMC,OAAO,GAAG,IAAIC,WAAW,CAAC,CAAC;MAEjC,OAAO,IAAI,EAAE;QACT,MAAM;UAAEC,IAAI;UAAEnD;QAAM,CAAC,GAAG,MAAM+C,MAAM,CAACK,IAAI,CAAC,CAAC;QAC3C,IAAID,IAAI,EAAE;QAEV,MAAME,IAAI,GAAGJ,OAAO,CAACK,MAAM,CAACtD,KAAK,CAAC;QAClC,MAAMuD,MAAM,GAAGF,IAAI,CAACtC,KAAK,CAAC,MAAM,CAAC;QAEjC,KAAK,MAAMyC,KAAK,IAAID,MAAM,EAAE;UACxB,IAAI,CAACC,KAAK,CAACjC,IAAI,CAAC,CAAC,EAAE;;UAEnB;UACA,MAAMU,KAAK,GAAGuB,KAAK,CAACvB,KAAK,CAAC,iBAAiB,CAAC;UAC5C,IAAI,CAACA,KAAK,EAAE;UAEZ,IAAI;YACA,MAAMwB,IAAI,GAAGlB,IAAI,CAACmB,KAAK,CAACzB,KAAK,CAAC,CAAC,CAAC,CAAC;YAEjC,IAAIwB,IAAI,CAACE,IAAI,KAAK,QAAQ,EAAE;cACxB3E,iBAAiB,CAACyE,IAAI,CAACJ,IAAI,CAAC;YAChC,CAAC,MAAM,IAAII,IAAI,CAACE,IAAI,KAAK,OAAO,EAAE;cAC9B3E,iBAAiB,CAAC,qBAAqB,CAAC;YAC5C,CAAC,MAAM,IAAIyE,IAAI,CAACE,IAAI,KAAK,KAAK,EAAE;cAC5BnE,UAAU,CAAC,OAAO,CAAC;cACnB;cACAoE,oBAAoB,CAACjF,UAAU,EAAE8E,IAAI,CAACJ,IAAI,EAAExE,wBAAwB,CAAC;YACzE;UACJ,CAAC,CAAC,OAAOgF,UAAU,EAAE;YACjBC,OAAO,CAACC,KAAK,CAAC,WAAW,EAAEF,UAAU,EAAE5B,KAAK,CAAC,CAAC,CAAC,CAAC;UACpD;QACJ;MACJ;IACJ,CAAC,CAAC,OAAO8B,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;MAC7B/E,iBAAiB,CAAC,qBAAqB,CAAC;IAC5C,CAAC,SAAS;MACNE,cAAc,CAAC,KAAK,CAAC;IACzB;EACJ;;EAEA;EACA,MAAM0E,oBAAoB,GAAG,MAAAA,CAAOI,eAAe,EAAEC,eAAe,EAAEC,WAAW,KAAK;IAClF,IAAI;MACAxE,WAAW,CAAC,IAAI,CAAC;MACjBoE,OAAO,CAACK,GAAG,CAAC,mBAAmB,CAAC;MAChCL,OAAO,CAACK,GAAG,CAAC,SAAS,EAAEH,eAAe,CAAC5C,MAAM,CAAC;MAC9C0C,OAAO,CAACK,GAAG,CAAC,UAAU,EAAEF,eAAe,CAAC7C,MAAM,CAAC;MAE/C,MAAMe,QAAQ,GAAG,MAAMrE,GAAG,CAACsG,IAAI,CAAC,SAAS,EAAE;QACvCJ,eAAe,EAAEA,eAAe;QAChCC,eAAe,EAAEA,eAAe;QAChCI,uBAAuB,EAAEH,WAAW,IAAI,EAAE;QAC1CI,MAAM,EAAE,SAAS;QAAE;QACnBC,MAAM,EAAE,CAAC,CAAC;MACd,CAAC,CAAC;MAEFT,OAAO,CAACK,GAAG,CAAC,OAAO,EAAEhC,QAAQ,CAAC;MAE9B,IAAIA,QAAQ,CAACsB,IAAI,IAAItB,QAAQ,CAACsB,IAAI,CAAClE,OAAO,EAAE;QACxCC,UAAU,CAACgF,IAAI,IAAIA,IAAI,GAAG,YAAY,CAAC;QACvCV,OAAO,CAACK,GAAG,CAAC,UAAU,EAAEhC,QAAQ,CAACsB,IAAI,CAACA,IAAI,CAACgB,EAAE,CAAC;MAClD,CAAC,MAAM;QACHX,OAAO,CAACC,KAAK,CAAC,OAAO,EAAE5B,QAAQ,CAACsB,IAAI,CAAC;MACzC;IACJ,CAAC,CAAC,OAAOM,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;IACrC,CAAC,SAAS;MACNrE,WAAW,CAAC,KAAK,CAAC;IACtB;EACJ,CAAC;EAED,oBACI7B,OAAA;IAAK4D,SAAS,EAAC,0BAA0B;IAAAG,QAAA,eACrC/D,OAAA;MAAK4D,SAAS,EAAC,wBAAwB;MAAAG,QAAA,gBAEnC/D,OAAA;QAAK4D,SAAS,EAAC,qBAAqB;QAAAG,QAAA,gBAChC/D,OAAA;UAAA+D,QAAA,EAAI;QAAM;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACfhD,OAAA;UACI4D,SAAS,EAAC,gBAAgB;UAC1BiD,OAAO,EAAEjG,aAAc;UAAAmD,QAAA,EAC1B;QAED;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC,eAGNhD,OAAA;QAAK4D,SAAS,EAAC,mBAAmB;QAAAG,QAAA,gBAC9B/D,OAAA;UAAI4D,SAAS,EAAC,YAAY;UAAAG,QAAA,EAAC;QAAI;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACpChD,OAAA;UACI4G,EAAE,EAAC,2BAA2B;UAC9BhD,SAAS,EAAC,oBAAoB;UAC9BkD,WAAW,EAAC,yFAAmB;UAC/B3E,KAAK,EAAEnB,wBAAyB;UAChC+F,QAAQ,EAAE3E;QAAyB;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CAAC,eAGNhD,OAAA;QAAK4D,SAAS,EAAC,6BAA6B;QAAAG,QAAA,gBAExC/D,OAAA;UAAK4D,SAAS,EAAC,eAAe;UAAAG,QAAA,gBAC1B/D,OAAA;YAAK4D,SAAS,EAAC,eAAe;YAAAG,QAAA,gBAC1B/D,OAAA;cAAA+D,QAAA,EAAI;YAAI;cAAAlB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACbhD,OAAA;cAAK4D,SAAS,EAAC,mBAAmB;cAAAG,QAAA,eAC9B/D,OAAA;gBACImC,KAAK,EAAEb,cAAe;gBACtByF,QAAQ,EAAG9E,CAAC,IAAKV,iBAAiB,CAACU,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;gBACnDyB,SAAS,EAAC,iBAAiB;gBAAAG,QAAA,gBAE3B/D,OAAA;kBAAQmC,KAAK,EAAC,cAAI;kBAAA4B,QAAA,EAAC;gBAAE;kBAAAlB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,EAC7BgE,MAAM,CAACC,OAAO,CAACvG,SAAS,CAAC,CACrBwG,MAAM,CAAC,CAAC,CAACC,CAAC,CAAC,KAAKA,CAAC,KAAK,IAAI,CAAC,CAC3BC,GAAG,CAAC,CAAC,CAACD,CAAC,EAAEE,CAAC,CAAC,kBACRrH,OAAA;kBAA4BmC,KAAK,EAAEgF,CAAE;kBAAApD,QAAA,EAAEsD;gBAAC,GAA3B,UAAUF,CAAC,EAAE;kBAAAtE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAuB,CACpD,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAEF;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACR,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eACNhD,OAAA;YAAK4D,SAAS,EAAC,qCAAqC;YAAAG,QAAA,eAChD/D,OAAA;cACI4D,SAAS,EAAC,mBAAmB;cAC7BkD,WAAW,EAAC,uEAAgB;cAC5B3E,KAAK,EAAErB,UAAW;cAClBiG,QAAQ,EAAE/E;YAAiB;cAAAa,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpB;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACX,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGNhD,OAAA;UAAK4D,SAAS,EAAC,mBAAmB;UAAAG,QAAA,gBAC9B/D,OAAA;YAAK4D,SAAS,EAAC,kBAAkB;YAAAG,QAAA,EAAC;UAAC;YAAAlB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACzChD,OAAA;YACI4D,SAAS,EAAC,eAAe;YACzBiD,OAAO,EAAExC,gBAAiB;YAC1BiD,QAAQ,EAAElG,WAAW,IAAI,CAACN,UAAU,CAAC4C,IAAI,CAAC,CAAE;YAAAK,QAAA,EAE3C3C,WAAW,GAAG,QAAQ,GAAG;UAAM;YAAAyB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B,CAAC,eACThD,OAAA;YAAK4D,SAAS,EAAC,iBAAiB;YAAAG,QAAA,eAC5B/D,OAAA;cACImC,KAAK,EAAEX,cAAe;cACtBuF,QAAQ,EAAG9E,CAAC,IAAKR,iBAAiB,CAACQ,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;cACnDyB,SAAS,EAAC,iBAAiB;cAAAG,QAAA,gBAE3B/D,OAAA;gBAAQmC,KAAK,EAAC,cAAI;gBAAA4B,QAAA,EAAC;cAAE;gBAAAlB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,EAC7BgE,MAAM,CAACC,OAAO,CAACvG,SAAS,CAAC,CACrBwG,MAAM,CAAC,CAAC,CAACC,CAAC,CAAC,KAAKA,CAAC,KAAK,IAAI,CAAC,CAC3BC,GAAG,CAAC,CAAC,CAACD,CAAC,EAAEE,CAAC,CAAC,kBACRrH,OAAA;gBAA4BmC,KAAK,EAAEgF,CAAE;gBAAApD,QAAA,EAAEsD;cAAC,GAA3B,UAAUF,CAAC,EAAE;gBAAAtE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAuB,CACpD,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEF;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC,eAGNhD,OAAA;UAAK4D,SAAS,EAAC,eAAe;UAAAG,QAAA,gBAC1B/D,OAAA;YAAK4D,SAAS,EAAC,eAAe;YAAAG,QAAA,gBAC1B/D,OAAA;cAAA+D,QAAA,EAAI;YAAM;cAAAlB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACfhD,OAAA;cAAK4D,SAAS,EAAC,kBAAkB;cAAAG,QAAA,GAE5BrC,OAAO,iBACJ1B,OAAA;gBAAK4D,SAAS,EAAC,iBAAiB;gBAAAG,QAAA,gBAC5B/D,OAAA;kBAAM4D,SAAS,EAAC,cAAc;kBAAAG,QAAA,EAAC;gBAAC;kBAAAlB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,KAAC,EAACtB,OAAO,EAC/CE,QAAQ,iBAAI5B,OAAA;kBAAM4D,SAAS,EAAC,kBAAkB;kBAAAG,QAAA,EAAC;gBAAS;kBAAAlB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC/D,CACR,EACA9B,cAAc,iBACXlB,OAAA;gBACI4D,SAAS,EAAC,qBAAqB;gBAC/BiD,OAAO,EAAExE,iBAAkB;gBAAA0B,QAAA,EAE1BjC,YAAY,GAAG,QAAQ,GAAG;cAAS;gBAAAe,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAChC,CACX;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC,eACNhD,OAAA;YAAK4D,SAAS,EAAC,qCAAqC;YAAAG,QAAA,EAC/C,CAAC7C,cAAc,gBACZlB,OAAA;cAAK4D,SAAS,EAAC,eAAe;cAAAG,QAAA,EAAC;YAE/B;cAAAlB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,GACNlB,YAAY,gBACZ9B,OAAA;cAAK4D,SAAS,EAAC,kBAAkB;cAAAG,QAAA,EAC5BzB,mBAAmB,CAACpB,cAAc;YAAC;cAAA2B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnC,CAAC,gBAENhD,OAAA;cACI4D,SAAS,EAAC,oBAAoB;cAC9BkD,WAAW,EAAC,0EAAc;cAC1B3E,KAAK,EAAEjB,cAAe;cACtBqG,QAAQ;YAAA;cAAA1E,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD;UACd;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACL,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd;AAACnC,EAAA,CAhVQJ,YAAY;AAAA+G,EAAA,GAAZ/G,YAAY;AAkVrB,eAAeA,YAAY;AAAC,IAAA+G,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}