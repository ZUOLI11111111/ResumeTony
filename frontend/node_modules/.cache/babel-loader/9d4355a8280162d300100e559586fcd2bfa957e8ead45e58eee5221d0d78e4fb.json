{"ast":null,"code":"var _jsxFileName = \"/home/m/resume_revision/frontend/src/app.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ResumeUpload from './components/ResumeUpload';\nimport ResumeReviewHistory from './components/ResumeReviewHistory';\nimport ErrorBoundary from './ErrorBoundary';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = window.location.hostname === 'localhost' ? 'http://localhost:5000' : `https://${window.location.hostname}`;\naxios.defaults.timeout = 300000;\n\n// 全局错误处理器\nconst withErrorHandling = Component => {\n  var _s = $RefreshSig$();\n  return _s(props => {\n    _s();\n    const [hasError, setHasError] = useState(false);\n    useEffect(() => {\n      const handleError = error => {\n        console.log('捕获到错误:', error);\n        setHasError(true);\n      };\n      window.addEventListener('error', handleError);\n      return () => window.removeEventListener('error', handleError);\n    }, []);\n    if (hasError) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u5E94\\u7528\\u51FA\\u73B0\\u95EE\\u9898\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u8BF7\\u5237\\u65B0\\u9875\\u9762\\u91CD\\u8BD5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.location.reload(),\n          style: {\n            padding: '8px 16px',\n            background: '#4a7bda',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          },\n          children: \"\\u5237\\u65B0\\u9875\\u9762\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n      children: /*#__PURE__*/_jsxDEV(Component, {\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this);\n  }, \"Y10BwSn8jQ4wQtRAtRxoscEk2KA=\");\n};\nfunction AppContent() {\n  _s2();\n  const [activeView, setActiveView] = useState('resumeUpload');\n  const [languages, setLanguages] = useState({});\n  useEffect(() => {\n    checkPythonBackendHealth();\n\n    // 清除错误覆盖层\n    const clearErrorOverlay = setInterval(() => {\n      const errorOverlay = document.querySelector('body > div:first-child');\n      if (errorOverlay && errorOverlay.textContent && errorOverlay.textContent.includes('Uncaught runtime errors')) {\n        errorOverlay.style.display = 'none';\n      }\n    }, 100);\n    return () => clearInterval(clearErrorOverlay);\n  }, []);\n  async function checkPythonBackendHealth() {\n    try {\n      const response = await axios.get(`${API_URL}/api/health`, {\n        timeout: 5000\n      });\n      getLanguages();\n    } catch (error) {\n      console.error('Python backend is not running');\n      try {\n        getLanguages();\n      } catch (error) {\n        console.error('Failed to get languages');\n      }\n    }\n  }\n  async function getLanguages() {\n    try {\n      const response = await axios.get(`${API_URL}/api/language`, {\n        timeout: 5000\n      });\n      setLanguages(response.data);\n    } catch (error) {\n      console.error('Failed to get languages');\n    }\n  }\n  const showResumeUpload = () => {\n    setActiveView('resumeUpload');\n  };\n  const showResumeReviewHistory = () => {\n    setActiveView('resumeReviewHistory');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u7B80\\u5386\\u4FEE\\u6539\\u5DE5\\u5177\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: activeView === 'resumeUpload' ? 'active' : '',\n        onClick: showResumeUpload,\n        children: \"\\u4E0A\\u4F20\\u7B80\\u5386\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: activeView === 'resumeReviewHistory' ? 'active' : '',\n        onClick: showResumeReviewHistory,\n        children: \"\\u67E5\\u770B\\u7B80\\u5386\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), activeView === 'resumeUpload' ? /*#__PURE__*/_jsxDEV(ResumeUpload, {\n      languages: languages,\n      apiUrl: API_URL,\n      onViewHistory: showResumeReviewHistory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(ResumeReviewHistory, {\n      onBack: showResumeUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n}\n\n// 使用高阶组件包装App\n_s2(AppContent, \"MdnQFG94IQ5XY+KYmZQN4fD4u+U=\");\n_c = AppContent;\nconst App = withErrorHandling(AppContent);\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","ResumeUpload","ResumeReviewHistory","ErrorBoundary","jsxDEV","_jsxDEV","API_URL","window","location","hostname","defaults","timeout","withErrorHandling","Component","_s","$RefreshSig$","props","hasError","setHasError","handleError","error","console","log","addEventListener","removeEventListener","style","textAlign","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","reload","background","color","border","borderRadius","cursor","AppContent","_s2","activeView","setActiveView","languages","setLanguages","checkPythonBackendHealth","clearErrorOverlay","setInterval","errorOverlay","document","querySelector","textContent","includes","display","clearInterval","response","get","getLanguages","data","showResumeUpload","showResumeReviewHistory","className","apiUrl","onViewHistory","onBack","_c","App","_c2","$RefreshReg$"],"sources":["/home/m/resume_revision/frontend/src/app.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport ResumeUpload from './components/ResumeUpload';\nimport ResumeReviewHistory from './components/ResumeReviewHistory';\nimport ErrorBoundary from './ErrorBoundary';\n\nconst API_URL = window.location.hostname === 'localhost' ? 'http://localhost:5000' : `https://${window.location.hostname}`;\naxios.defaults.timeout = 300000;\n\n// 全局错误处理器\nconst withErrorHandling = (Component) => {\n    return (props) => {\n        const [hasError, setHasError] = useState(false);\n        \n        useEffect(() => {\n            const handleError = (error) => {\n                console.log('捕获到错误:', error);\n                setHasError(true);\n            };\n            \n            window.addEventListener('error', handleError);\n            return () => window.removeEventListener('error', handleError);\n        }, []);\n        \n        if (hasError) {\n            return (\n                <div style={{textAlign: 'center', padding: '20px'}}>\n                    <h2>应用出现问题</h2>\n                    <p>请刷新页面重试</p>\n                    <button \n                        onClick={() => window.location.reload()}\n                        style={{\n                            padding: '8px 16px',\n                            background: '#4a7bda',\n                            color: 'white',\n                            border: 'none',\n                            borderRadius: '4px',\n                            cursor: 'pointer'\n                        }}\n                    >\n                        刷新页面\n                    </button>\n                </div>\n            );\n        }\n        \n        return (\n            <ErrorBoundary>\n                <Component {...props} />\n            </ErrorBoundary>\n        );\n    };\n};\n\nfunction AppContent() {\n    const [activeView, setActiveView] = useState('resumeUpload');\n    const [languages, setLanguages] = useState({});\n    \n    useEffect(() => {\n        checkPythonBackendHealth();\n        \n        // 清除错误覆盖层\n        const clearErrorOverlay = setInterval(() => {\n            const errorOverlay = document.querySelector('body > div:first-child');\n            if (errorOverlay && \n                errorOverlay.textContent && \n                errorOverlay.textContent.includes('Uncaught runtime errors')) {\n                errorOverlay.style.display = 'none';\n            }\n        }, 100);\n        \n        return () => clearInterval(clearErrorOverlay);\n    }, []);\n    \n    async function checkPythonBackendHealth() {\n        try {\n            const response = await axios.get(`${API_URL}/api/health`, {timeout: 5000});\n            getLanguages();\n        } catch (error) {\n            console.error('Python backend is not running');\n            try {\n                getLanguages();\n            } catch (error) {\n                console.error('Failed to get languages');\n            }\n        }\n    }\n    \n    async function getLanguages() {\n        try {\n            const response = await axios.get(`${API_URL}/api/language`, {timeout: 5000});\n            setLanguages(response.data);\n        } catch (error) {\n            console.error('Failed to get languages');\n        }\n    }\n    \n    const showResumeUpload = () => {\n        setActiveView('resumeUpload');\n    }\n    \n    const showResumeReviewHistory = () => {\n        setActiveView('resumeReviewHistory');\n    }\n    \n    return (\n        <div className=\"app-container\">\n            <h1>简历修改工具</h1>\n            <div className=\"button\">\n                <button\n                    className={activeView === 'resumeUpload' ? 'active' : ''}\n                    onClick={showResumeUpload}\n                >上传简历</button>\n                <button\n                    className={activeView === 'resumeReviewHistory' ? 'active' : ''}\n                    onClick={showResumeReviewHistory}\n                >查看简历</button>\n            </div> \n            {activeView === 'resumeUpload' ? (\n                <ResumeUpload languages={languages} apiUrl={API_URL} onViewHistory={showResumeReviewHistory}/>\n            ) : (\n                <ResumeReviewHistory onBack={showResumeUpload}/>\n            )}\n        </div>\n    );\n}\n\n// 使用高阶组件包装App\nconst App = withErrorHandling(AppContent);\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}